"use strict";(self.webpackChunkreact_homework_phonebook_RTK_Query=self.webpackChunkreact_homework_phonebook_RTK_Query||[]).push([[7],{2007:function(n,e,t){t.r(e),t.d(e,{default:function(){return q}});var a=t(2982),o=t(885),r=t(2791),i=t(5048),c=t(6445),l=t(493),s=t(5021),u=t(6278),d=t(9900),m=t(653),h=t(9174),x=t(3044),f=t(8383),p=t(184),b=function(n){var e=n.value,t=n.onChange;return(0,p.jsx)(f.Z,{id:"contacts-search",label:"Search",value:e,onChange:function(n){return t(n.currentTarget.value)},type:"search"})},Z=t(7247),j=t(3400),g=t(4554),v=t(3494),C=t(2674),y=t(3718),k=t(4942),w=t(1413),T=t(6151),N=t(4708),S=t(890),_=t(7107),I=t(7012),L=t(7275),W=t.n(L),A=t(1874),E=(0,_.Z)();var F=function(n){var e=n.addedContacts,t=n.onClose,a=n.contactIdToEdit,l=void 0===a?null:a,s=(0,r.useState)({name:"",number:""}),u=(0,o.Z)(s,2),d=u[0],m=u[1],h=(0,i.I0)(),x=(0,A.Lr)(),b=(0,o.Z)(x,2),Z=b[0],j=b[1].isLoading,v=(0,C.N)();(0,r.useEffect)((function(){l&&m(e.find((function(n){return n.id===l})))}),[l,e]);var y=function(){m({name:"",number:""})};return(0,p.jsx)(I.Z,{theme:E,children:(0,p.jsxs)(c.Z,{component:"main",maxWidth:"xs",children:[(0,p.jsx)(N.ZP,{}),(0,p.jsxs)(g.Z,{sx:{marginTop:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,p.jsx)(S.Z,{component:"h1",variant:"h5",children:l?"Edit contact":"Add new contact"}),(0,p.jsxs)(g.Z,{component:"form",onSubmit:function(n){var a,o;(n.preventDefault(),0!==d.name.length&&0!==d.number.length)?l?(h(),t(),y()):(a=e,o=d.name,a.find((function(n){return n.name.toLowerCase()===o.toLowerCase()}))?v({title:"Oh no!",description:"Name ".concat(d.name," already exists in your phone book"),cancellationText:""}).catch((function(){})):Z(d).then((function(n){t(),y()}))):v({title:'Fields "Name" or "Number" can\'t be empty!',description:'Type "Name" and "Number" to relevant fields!',cancellationText:""}).catch((function(){}))},noValidate:!0,sx:{mt:1},children:[(0,p.jsx)(f.Z,{margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"Name",autoFocus:!0,value:d.name,onChange:function(n){var e=n.currentTarget,t=e.name,a=e.value;m((function(n){return(0,w.Z)((0,w.Z)({},n),{},(0,k.Z)({},t,a))}))}}),(0,p.jsx)(W(),{required:!0,value:d.number,onChange:function(n){m((function(e){return(0,w.Z)((0,w.Z)({},e),{},{number:n})}))},component:f.Z}),(0,p.jsx)(T.Z,{type:"submit",fullWidth:!0,variant:"contained",disabled:j,sx:{mt:3,mb:2},children:l?"Save changes":"Add"})]})]})]})})},P={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},O=function(){var n=(0,r.useState)(""),e=(0,o.Z)(n,2),t=e[0],f=e[1],k=(0,A.Jx)().data;console.log(k);var w=(0,i.I0)(),T=(0,r.useState)([]),N=(0,o.Z)(T,2),S=N[0],_=N[1],I=(0,C.N)(),L=(0,r.useState)(!1),W=(0,o.Z)(L,2),E=W[0],O=W[1],q=(0,r.useState)(""),z=(0,o.Z)(q,2),D=z[0],K=z[1],Q=function(){O(!1),K("")};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.Z,{maxWidth:"xs",sx:{mt:2},children:[(0,p.jsxs)(g.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[(0,p.jsx)(j.Z,{"aria-label":"add",size:"large",onClick:function(){return O(!0)},children:(0,p.jsx)(v.Z,{})}),(0,p.jsx)(b,{value:t,onChange:function(n){f(n)}}),(0,p.jsx)(j.Z,{"aria-label":"delete",size:"large",disabled:S.length<1,onClick:function(){var n=S.map((function(n){return k.find((function(e){return e.id===n})).name})).join(", ");I({description:"Are you really want to delete ".concat(n," from your contact book?")}).then((function(){S.map((function(n){return w()})),_([])})).catch((function(){}))},children:(0,p.jsx)(Z.Z,{})})]}),(0,p.jsx)(l.Z,{dense:!0,sx:{width:"100%",maxWidth:385,bgcolor:"background.paper"},children:k&&k.length>0&&k.filter((function(n){return n.name.toLowerCase().includes(t.toLowerCase())})).map((function(n){var e,t=n.id,o=n.name,r=n.number,i="checkbox-list-secondary-label-".concat(t);return(0,p.jsx)(s.ZP,{secondaryAction:(0,p.jsx)(h.Z,{edge:"end",onChange:(e=t,function(){var n=S.indexOf(e),t=(0,a.Z)(S);-1===n?t.push(e):t.splice(n,1),_(t)}),checked:-1!==S.indexOf(t),inputProps:{"aria-labelledby":i}}),disablePadding:!0,children:(0,p.jsxs)(u.Z,{onClick:function(){return function(n){K(n),O(!0)}(t)},children:[(0,p.jsx)(m.Z,{children:(0,p.jsx)(x.Z,{alt:"".concat(o)})}),(0,p.jsx)(d.Z,{id:i,primary:"".concat(o)}),(0,p.jsx)(d.Z,{sx:{textAlign:"right"},primary:"".concat(r)})]})},t)}))})]}),E&&(0,p.jsx)(y.Z,{open:E,onClose:Q,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,p.jsx)(g.Z,{sx:P,children:(0,p.jsx)(F,{addedContacts:k,onClose:Q,contactIdToEdit:D||null})})})]})};function q(){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(C.W,{children:(0,p.jsx)(O,{})})})}}}]);
//# sourceMappingURL=7.ea63da6f.chunk.js.map