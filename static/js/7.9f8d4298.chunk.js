"use strict";(self.webpackChunkreact_homework_phonebook_RTK_Query=self.webpackChunkreact_homework_phonebook_RTK_Query||[]).push([[7],{2007:function(n,e,t){t.r(e),t.d(e,{default:function(){return O}});var a=t(2982),r=t(885),o=t(2791),i=t(6445),c=t(493),l=t(5021),s=t(6278),u=t(9900),d=t(653),m=t(9174),h=t(3044),f=t(8383),x=t(184),p=function(n){var e=n.value,t=n.onChange;return(0,x.jsx)(f.Z,{id:"contacts-search",label:"Search",value:e,onChange:function(n){return t(n.currentTarget.value)},type:"search"})},Z=t(7247),b=t(3400),j=t(4554),g=t(3494),v=t(2674),C=t(3718),y=t(4942),k=t(1413),w=t(6151),N=t(4708),T=t(890),S=t(7107),_=t(7012),W=t(7275),A=t.n(W),E=t(8368),L=(0,S.Z)();var F=function(n){var e=n.addedContacts,t=n.onClose,a=n.contactIdToEdit,c=void 0===a?null:a,l=(0,o.useState)({name:"",number:""}),s=(0,r.Z)(l,2),u=s[0],d=s[1],m=(0,E.Lr)(),h=(0,r.Z)(m,2),p=h[0],Z=h[1].isCreating,b=(0,E.i)(),g=(0,r.Z)(b,2),C=g[0],S=g[1].isEditing,W=(0,v.N)();(0,o.useEffect)((function(){c&&d(e.find((function(n){return n.id===c})))}),[c,e]);var F=function(){d({name:"",number:""})};return(0,x.jsx)(_.Z,{theme:L,children:(0,x.jsxs)(i.Z,{component:"main",maxWidth:"xs",children:[(0,x.jsx)(N.ZP,{}),(0,x.jsxs)(j.Z,{sx:{marginTop:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,x.jsx)(T.Z,{component:"h1",variant:"h5",children:c?"Edit contact":"Add new contact"}),(0,x.jsxs)(j.Z,{component:"form",onSubmit:function(n){var a,r;(n.preventDefault(),0!==u.name.length&&0!==u.number.length)?c?C((0,k.Z)({id:c},u)).then((function(n){t(),F()})):(a=e,r=u.name,a.find((function(n){return n.name.toLowerCase()===r.toLowerCase()}))?W({title:"Oh no!",description:"Name ".concat(u.name," already exists in your phone book"),cancellationText:""}).catch((function(){})):p(u).then((function(n){t(),F()}))):W({title:'Fields "Name" or "Number" can\'t be empty!',description:'Type "Name" and "Number" to relevant fields!',cancellationText:""}).catch((function(){}))},noValidate:!0,sx:{mt:1},children:[(0,x.jsx)(f.Z,{margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"Name",autoFocus:!0,value:u.name,onChange:function(n){var e=n.currentTarget,t=e.name,a=e.value;d((function(n){return(0,k.Z)((0,k.Z)({},n),{},(0,y.Z)({},t,a))}))}}),(0,x.jsx)(A(),{required:!0,value:u.number,onChange:function(n){d((function(e){return(0,k.Z)((0,k.Z)({},e),{},{number:n})}))},component:f.Z}),(0,x.jsx)(w.Z,{type:"submit",fullWidth:!0,variant:"contained",disabled:S||Z,sx:{mt:3,mb:2},children:c?"Save changes":"Add"})]})]})]})})},I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},P=function(){var n=(0,o.useState)(""),e=(0,r.Z)(n,2),t=e[0],f=e[1],y=(0,E.Jx)().data,k=(0,o.useState)([]),w=(0,r.Z)(k,2),N=w[0],T=w[1],S=(0,v.N)(),_=(0,o.useState)(!1),W=(0,r.Z)(_,2),A=W[0],L=W[1],P=(0,o.useState)(""),O=(0,r.Z)(P,2),q=O[0],z=O[1],D=(0,E.Nt)(),K=(0,r.Z)(D,1)[0],Q=function(){L(!1),z("")};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(i.Z,{maxWidth:"xs",sx:{mt:2},children:[(0,x.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[(0,x.jsx)(b.Z,{"aria-label":"add",size:"large",onClick:function(){return L(!0)},children:(0,x.jsx)(g.Z,{})}),(0,x.jsx)(p,{value:t,onChange:function(n){f(n)}}),(0,x.jsx)(b.Z,{"aria-label":"delete",size:"large",disabled:N.length<1,onClick:function(){var n=N.map((function(n){return y.find((function(e){return e.id===n})).name})).join(", ");S({description:"Are you really want to delete ".concat(n," from your contact book?")}).then((function(){N.map((function(n){return K(n).then((function(n){return T([])}))}))})).catch((function(){}))},children:(0,x.jsx)(Z.Z,{})})]}),(0,x.jsx)(c.Z,{dense:!0,sx:{width:"100%",maxWidth:385,bgcolor:"background.paper"},children:y&&y.length>0&&y.filter((function(n){return n.name.toLowerCase().includes(t.toLowerCase())})).map((function(n){var e,t=n.id,r=n.name,o=n.number,i="checkbox-list-secondary-label-".concat(t);return(0,x.jsx)(l.ZP,{secondaryAction:(0,x.jsx)(m.Z,{edge:"end",onChange:(e=t,function(){var n=N.indexOf(e),t=(0,a.Z)(N);-1===n?t.push(e):t.splice(n,1),T(t)}),checked:-1!==N.indexOf(t),inputProps:{"aria-labelledby":i}}),disablePadding:!0,children:(0,x.jsxs)(s.Z,{onClick:function(){return function(n){z(n),L(!0)}(t)},children:[(0,x.jsx)(d.Z,{children:(0,x.jsx)(h.Z,{alt:"".concat(r)})}),(0,x.jsx)(u.Z,{id:i,primary:"".concat(r)}),(0,x.jsx)(u.Z,{sx:{textAlign:"right"},primary:"".concat(o)})]})},t)}))})]}),A&&(0,x.jsx)(C.Z,{open:A,onClose:Q,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,x.jsx)(j.Z,{sx:I,children:(0,x.jsx)(F,{addedContacts:y,onClose:Q,contactIdToEdit:q||null})})})]})};function O(){return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(v.W,{children:(0,x.jsx)(P,{})})})}}}]);
//# sourceMappingURL=7.9f8d4298.chunk.js.map